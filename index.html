<!DOCTYPE html>
<html lang="fi">
<head>
    <link rel="icon" href="favicon2.png" type="image/png">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nettopalkkalaskuri</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        /* Määritellään Inter-fontti */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Korjataan select- ja input-elementtien ulkonäkö */
        input[type="number"], select {
            border: 2px solid #D1D5DB;
            transition: all 0.2s ease-in-out;
        }

        input[type="number"]:focus, select:focus {
            border-color: #6366F1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.4);
        }

        /* Piilotetaan nuoli input-kentistä (parempi estetiikka) */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Tyylit palkkien esittämiseen */
        .result-bar-container {
            height: 20px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-200 via-purple-300 to-indigo-200 min-h-screen font-sans flex flex-col items-center">

    <div class="fixed top-4 right-4 z-50">
        <select id="language" onchange="vaihdaKieli()"
            class="p-2 text-sm rounded-lg border-2 border-purple-400 bg-white shadow-lg hover:border-purple-600 transition cursor-pointer text-gray-700">
            <option value="fi">FI</option>
            <option value="sv">SV</option>
            <option value="en">EN</option>
        </select>
    </div>

    <header class="text-center mt-12 mb-8 sm:mt-20 sm:mb-12">
        <h1 id="otsikko"
            class="text-4xl sm:text-6xl font-extrabold text-indigo-700 tracking-tight drop-shadow-md">
            Nettopalkkalaskuri
        </h1>
        <p id="otsikkoAlateksti" class="text-lg sm:text-xl text-purple-700 font-semibold mt-3">
            Laske, paljonko sinulle jää rahaa verojen jälkeen
        </p>
    </header>

    <div class="w-full max-w-xs sm:max-w-md p-6 sm:p-8 bg-white/90 backdrop-blur-md rounded-3xl shadow-2xl border-t-4 border-indigo-500 relative" id="paaBoksi">

        <div class="space-y-6">

            <div class="relative">
                <label id="labelPalkka" for="palkka" class="block text-gray-700 font-bold mb-2">Kuukausipalkka (€)</label>
                <div class="relative">
                    <i class="fas fa-euro-sign absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400"></i>
                    <input id="palkka" type="number" step="0.01" min="0" placeholder="3800" oninput="laske()"
                        class="w-full p-3 pl-10 rounded-xl focus:outline-none shadow-inner bg-gray-50">
                </div>
            </div>

            <div class="relative">
                <label id="labelVeroProsentti" for="veroprosentti" class="block text-gray-700 font-bold mb-2">Veroprosentti (%)</label>
                <div class="relative">
                    <i class="fas fa-percent absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400"></i>
                    <input id="veroprosentti" type="number" step="0.1" min="0" max="100" placeholder="25.5" oninput="laske()"
                        class="w-full p-3 pl-10 rounded-xl focus:outline-none shadow-inner bg-gray-50">
                </div>
            </div>

            <div class="relative">
                <label id="labelIka" for="ika" class="block text-gray-700 font-bold mb-2">Ikä</label>
                <div class="relative">
                    <i class="fas fa-user absolute left-3 top-1/2 transform -translate-y-1/2 text-indigo-400"></i>
                    <input id="ika" type="number" step="1" min="0" placeholder="38" oninput="laske()"
                        class="w-full p-3 pl-10 rounded-xl focus:outline-none shadow-inner bg-gray-50">
                </div>
            </div>

            </div>

        <button id="laskeNappi" onclick="laske()"
            class="mt-8 w-full bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-2xl text-lg font-extrabold shadow-lg transition-all transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-indigo-300">
            Laske
        </button>

        <div id="tulos"
            class="mt-8 bg-green-50 border-2 border-green-400 p-6 rounded-3xl shadow-xl text-center text-green-900 opacity-0 translate-y-3 transition-all duration-700">
        </div>

    </div>

    <div id="varoitus"
        class="px-4 sm:px-0 mt-8 max-w-full sm:max-w-xl text-justify text-sm rounded-md text-gray-700 leading-relaxed mx-auto">
        Tämä nettolaskuri on suuntaa-antava. Se ei korvaa virallista veroneuvontaa tai Verohallinnon laskuria. Laskuri käyttää arvioituja vuoden 2025 veroprosentteja ja sisältää vain yleisimmät lakisääteiset vähennykset (TyEL, työttömyysvakuutus ja työtulovähennys). Se ei ota huomioon kaikkia henkilökohtaisia vähennyksiä (esim. matkakulut tai kotitalousvähennys) tai verokortin tulorajoja. Kehittäjä ei vastaa laskurin antamien tietojen virheellisyydestä.
    </div>

    <footer class="mt-12 mb-4 text-xs text-gray-500">
        © 2025 Nettopalkkalaskuri. Kaikki oikeudet pidätetään.
    </footer>

    <script>
        const texts = {
            fi: {
                otsikko: "Nettopalkkalaskuri",
                otsikkoAlateksti: "Laske, paljonko sinulle jää rahaa verojen jälkeen",
                palkka: "Kuukausipalkka (€)",
                veroprosentti: "Veroprosentti (%)",
                ika: "Ikä",
                laske: "Laske",
                kaateen: "Käteen jää (kk)",
                vero: "Vero & maksut (kk)",
                veroprosenttiTulos: "Veroprosentti",
                vuosiyhteenveto: "Vuositiedot",
                vuositulo: "Vuosipalkka",
                vuosivero: "Vero & maksut vuodessa",
                vuosinetto: "Käteen vuodessa",
                virhe: "Syötä palkka, ikä ja veroprosentti oikein.",
                varoitus: "Tämä nettolaskuri on suuntaa-antava. Se ei korvaa virallista veroneuvontaa tai Verohallinnon laskuria. Laskuri käyttää arvioituja vuoden 2025 veroprosentteja ja sisältää vain yleisimmät lakisääteiset vähennykset (TyEL, työttömyysvakuutus ja työtulovähennys). Se ei ota huomioon kaikkia henkilökohtaisia vähennyksiä (esim. matkakulut tai kotitalousvähennys) tai verokortin tulorajoja. Kehittäjä ei vastaa laskurin antamien tietojen virheellisyydestä.",
            },
            sv: {
                otsikko: "Netto lönekalkylator",
                otsikkoAlateksti: "Räkna ut hur mycket pengar som blir kvar efter skatt",
                palkka: "Månadslön (€)",
                veroprosentti: "Skattesats (%)",
                ika: "Ålder",
                laske: "Beräkna",
                kaateen: "Kvar (mån)",
                vero: "Skatt & avgifter (mån)",
                veroprosenttiTulos: "Skattesats",
                vuosiyhteenveto: "Årsöversikt",
                vuositulo: "Årslön",
                vuosivero: "Skatt & avgifter per år",
                vuosinetto: "Kvar per år",
                virhe: "Ange lön, ålder och skattesats korrekt.",
                varoitus: "Denna nettolönskalkylator är vägledande. Den ersätter inte officiell skatterådgivning eller Skatteförvaltningens kalkylator. Kalkylatorn använder uppskattade skattesatser för 2025 och inkluderar endast de vanligaste lagstadgade avdragen (ArPL, arbetslöshetsförsäkring och arbetsinkomstavdrag). Den tar inte hänsyn till alla personliga avdrag (t.ex. resekostnader eller hushållsavdrag) eller skattekortets inkomstgränser. Utvecklaren ansvarar inte för felaktigheter i kalkylatorns resultat.",
            },
            en: {
                otsikko: "Net Salary Calculator",
                otsikkoAlateksti: "Calculate how much money you keep after taxes",
                palkka: "Monthly Salary (€)",
                veroprosentti: "Tax Rate (%)",
                ika: "Age",
                laske: "Calculate",
                kaateen: "Take-home (mo)",
                vero: "Tax & Fees (mo)",
                veroprosenttiTulos: "Tax Rate",
                vuosiyhteenveto: "Yearly Summary",
                vuositulo: "Annual Salary",
                vuosivero: "Annual Tax & Fees",
                vuosinetto: "Take-home per year",
                virhe: "Please enter salary, age and tax rate correctly.",
                varoitus: "This net salary calculator is indicative. It does not replace official tax advice or the Tax Administration's calculator. The calculator uses estimated 2025 tax rates and includes only the most common statutory deductions (TyEL, unemployment insurance, and earned income deduction). It does not consider all personal deductions (e.g., travel costs or household deduction) or tax card income limits. The developer is not responsible for errors in the calculator's results.",
            }
        };

        function vaihdaKieli() {
            const lang = document.getElementById("language").value;
            const t = texts[lang];

            document.getElementById("otsikko").innerText = t.otsikko;
            document.getElementById("otsikkoAlateksti").innerText = t.otsikkoAlateksti;
            document.getElementById("labelPalkka").innerText = t.palkka;
            document.getElementById("labelVeroProsentti").innerText = t.veroprosentti;
            document.getElementById("labelIka").innerText = t.ika;
            document.getElementById("laskeNappi").innerText = t.laske;
            document.getElementById("varoitus").innerHTML = t.varoitus;

            if (document.getElementById("tulos").style.opacity === "1") {
                laske();
            }
        }

        function laske() {
            const palkka = parseFloat(document.getElementById("palkka").value);
            const veroprosentti = parseFloat(document.getElementById("veroprosentti").value);
            const ika = parseInt(document.getElementById("ika").value);
            const tulosDiv = document.getElementById("tulos");
            const t = texts[document.getElementById("language").value];

            // --- Tarkista syötteiden kelpoisuus (estää virheilmoitukset automaattilaskennassa) ---
            if (isNaN(palkka) || palkka <= 0 || isNaN(veroprosentti) || veroprosentti < 0 || veroprosentti > 100 || isNaN(ika) || ika < 1) {
                // Piilota tuloslaatikko, jos syötteet ovat epätäydelliset tai virheelliset
                tulosDiv.style.opacity = "0";
                tulosDiv.style.transform = "translateY(10px)";
                return;
            }

            // --- 1. Lakisääteiset työntekijämaksut (2025 arvio) ---
            const tyottomyysvakuutus = 0.0079;
            const sairaanhoitomaksu = 0.0106;

            let tyelProsentti;
            if (ika >= 53 && ika <= 62) {
                tyelProsentti = 0.0865;
            } else if (ika >= 17 && ika < 68) {
                tyelProsentti = 0.0715;
            } else {
                tyelProsentti = 0.00;
            }

            const pakollisetMaksutProsentti = tyelProsentti + tyottomyysvakuutus + sairaanhoitomaksu;
            const pakollisetMaksutKK = palkka * pakollisetMaksutProsentti;

            // --- 2. Vero (Käyttäjän syöttämä osuus) ---
            const veroProsenttiKerroin = veroprosentti / 100;
            const veroKK = palkka * veroProsenttiKerroin;

            // --- 3. Lopputulokset ---

            const verotJaMaksutKK = pakollisetMaksutKK + veroKK;
            const netto = palkka - verotJaMaksutKK;

            const vuosipalkka = palkka * 12;
            const vuosiverotJaMaksut = verotJaMaksutKK * 12;
            const vuosinetto = netto * 12;

            // Laske palkkiprosentit visuaalista esitystä varten
            const nettoprosentti = (netto / palkka) * 100;
            const veroprosenttiTotal = (verotJaMaksutKK / palkka) * 100;

            // Tulostus
            tulosDiv.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <div class="text-3xl font-extrabold text-green-700">${t.kaateen}:</div>
                    <div class="text-3xl font-extrabold text-green-700">${netto.toFixed(2)} €</div>
                </div>

                <div class="result-bar-container my-4">
                    <div class="h-full bg-green-500 float-left" style="width: ${nettoprosentti.toFixed(1)}%;"></div>
                    <div class="h-full bg-red-500 float-right" style="width: ${veroprosenttiTotal.toFixed(1)}%;"></div>
                </div>

                <div class="flex justify-between text-base font-semibold mt-3 text-gray-700">
                    <span class="flex items-center"><i class="fas fa-arrow-alt-circle-down text-red-500 mr-2"></i> ${t.vero}:</span>
                    <span>${verotJaMaksutKK.toFixed(2)} €</span>
                </div>
                <div class="flex justify-between text-base font-semibold text-gray-700">
                    <span class="flex items-center"><i class="fas fa-percentage text-indigo-500 mr-2"></i> Kokonaisprosentti:</span>
                    <span>${veroprosenttiTotal.toFixed(1)}%</span>
                </div>

                <hr class="my-4 border-green-300">

                <div class="text-xl font-bold mb-2 text-green-800">${t.vuosiyhteenveto}</div>
                <div class="flex justify-between text-base font-medium text-gray-700">
                    <span>${t.vuositulo}:</span>
                    <span>${vuosipalkka.toFixed(2)} €</span>
                </div>
                <div class="flex justify-between text-base font-medium text-gray-700">
                    <span>${t.vuosivero}:</span>
                    <span>${vuosiverotJaMaksut.toFixed(2)} €</span>
                </div>
                <div class="flex justify-between text-base font-medium text-gray-700">
                    <span>${t.vuosinetto}:</span>
                    <span>${vuosinetto.toFixed(2)} €</span>
                </div>
            `;

            tulosDiv.style.opacity = "1";
            tulosDiv.style.transform = "translateY(0)";
        }

        window.onload = () => {
            vaihdaKieli();
        };
    </script>

</body>
</html>
