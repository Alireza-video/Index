<!DOCTYPE html>
<html lang="fi">
<head>
  <link rel="icon" href="favicon2.png" type="image/png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nettopalkkalaskuri</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-br from-blue-200 via-purple-200 to-blue-100 min-h-screen font-sans flex flex-col items-center relative">

  <!-- Kielivalikko -->
  <div class="fixed top-4 right-4 z-50">
    <select id="language"
            onchange="vaihdaKieli()"
            class="p-2 text-sm sm:text-base rounded-md border border-gray-300 bg-white shadow-md hover:ring-2 hover:ring-blue-300 transition">
      <option value="fi">Suomi</option>
      <option value="sv">Svenska</option>
      <option value="en">English</option>
    </select>
  </div>

  <!-- Otsikko -->
  <h1 id="otsikko"
      class="absolute sm:static top-8 left-8 sm:top-auto sm:left-auto text-3xl sm:text-5xl font-extrabold text-purple-500 tracking-tight drop-shadow-sm text-center sm:text-left mt-4 sm:mt-0">
      Nettopalkkalaskuri
  </h1>

  <!-- Pääboksin sisältö -->
  <div class="w-full max-w-xs sm:max-w-lg p-6 sm:p-8 bg-white rounded-3xl shadow-2xl mt-32 relative" id="paaBoksi">

    <!-- Otsikon ala-teksti -->
    <p id="otsikkoAlateksti" class="text-center text-lg sm:text-2xl text-blue-700 font-bold mb-6">
      Laske, paljonko sinulle jää rahaa verojen jälkeen
    </p>

    <!-- Syöttökentät -->
    <div class="space-y-4 px-4 sm:px-0">
      <div>
        <label id="labelPalkka" for="palkka" class="block text-gray-700 font-semibold mb-1">Kuukausipalkka (€)</label>
        <input id="palkka" type="number" step="0.01" min="0" placeholder="3500"
               class="w-full p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition shadow-sm">
      </div>

      <div>
        <label id="labelIka" for="ika" class="block text-gray-700 font-semibold mb-1">Ikä</label>
        <input id="ika" type="number" step="1" min="0" placeholder="38"
               class="w-full p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition shadow-sm">
      </div>

      <div>
        <label id="labelKunta" for="kunta" class="block text-gray-700 font-semibold mb-1">Kaupunki</label>
        <select id="kunta" class="w-full p-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none transition shadow-sm">
          <option value="Helsinki">Helsinki</option>
          <option value="Tampere">Tampere</option>
          <option value="Oulu">Oulu</option>
          <option value="Turku">Turku</option>
          <option value="Muu">Muu Suomi</option>
        </select>
      </div>

      <div class="flex items-center space-x-2">
        <input id="kirkollisvero" type="checkbox" class="accent-blue-600 w-5 h-5">
        <label id="labelKirkko" for="kirkollisvero" class="text-gray-700 font-semibold">Kuulun kirkkoon</label>
      </div>
    </div>

    <!-- Laske-painike -->
    <button id="laskeNappi" onclick="laske()"
            class="mt-6 w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-2xl text-lg font-bold shadow-lg transition-all transform sm:hover:scale-105">
      Laske
    </button>

    <!-- Tuloskortti -->
    <div id="tulos"
         class="mt-8 bg-gradient-to-r from-green-100 to-green-200 p-6 rounded-3xl shadow-lg text-center text-2xl font-bold text-green-800 opacity-0 translate-y-3 transition-all duration-700">
    </div>

  </div>

  <!-- Lailliset varoitukset -->
  <div id="varoitus"
       class="px-4 sm:px-6 mt-4 max-w-full sm:max-w-[840px] text-justify text-xs rounded-md text-gray-900">
    Tämä nettolaskuri on suuntaa-antava. Se ei korvaa virallista veroneuvontaa tai verolaskuria. Lopullinen verotietosi voi poiketa laskurin tuloksista. Kehittäjä ei vastaa laskurin antamien tietojen virheellisyydestä, seurauksista tai päätöksistä, joita teet laskurin perusteella. Huom! Laskuri ei ota huomioon kaikkia mahdollisia vero- tai vähennyskohtia (esim. henkilökohtaiset vähennykset, eläkemaksut tai muut erityistapaukset).
  </div>

  <script>
    const texts = {
      fi: {
        otsikko: "Nettopalkkalaskuri",
        otsikkoAlateksti: "Laske, paljonko sinulle jää rahaa verojen jälkeen",
        palkka: "Kuukausipalkka (€)",
        ika: "Ikä",
        kunta: "Kaupunki",
        kirkko: "Kuulun kirkkoon",
        laske: "Laske",
        kaateen: "Käteen jää (kk)",
        vero: "Vero (kk)",
        veroprosentti: "Arvioitu veroprosentti",
        vuosiyhteenveto: "Vuositiedot",
        vuositulo: "Vuosipalkka",
        vuosivero: "Vero vuodessa",
        vuosinetto: "Käteen vuodessa",
        virhe: "Syötä palkka ja ikä oikein.",
        varoitus: "Tämä nettolaskuri on suuntaa-antava. Se ei korvaa virallista veroneuvontaa tai verolaskuria. Lopullinen verotietosi voi poiketa laskurin tuloksista. Kehittäjä ei vastaa laskurin antamien tietojen virheellisyydestä, seurauksista tai päätöksistä, joita teet laskurin perusteella. Huom! Laskuri ei ota huomioon kaikkia mahdollisia vero- tai vähennyskohtia (esim. henkilökohtaiset vähennykset, eläkemaksut tai muut erityistapaukset).",
        kuntaValinnat: ["Helsinki", "Tampere", "Oulu", "Turku", "Muu Suomi"]
      },
      sv: {
        otsikko: "Netto lönekalkylator",
        otsikkoAlateksti: "Räkna ut hur mycket pengar som blir kvar efter skatt",
        palkka: "Månadslön (€)",
        ika: "Ålder",
        kunta: "Stad",
        kirkko: "Jag tillhör kyrkan",
        laske: "Beräkna",
        kaateen: "Kvar (mån)",
        vero: "Skatt (mån)",
        veroprosentti: "Beräknad skattesats",
        vuosiyhteenveto: "Årsöversikt",
        vuositulo: "Årslön",
        vuosivero: "Årlig skatt",
        vuosinetto: "Kvar per år",
        virhe: "Ange lön och ålder korrekt.",
        varoitus: "Denna nettolönskalkylator är vägledande. Den ersätter inte officiell skatterådgivning eller skatteberäknare. Dina slutliga skatteuppgifter kan skilja sig från kalkylatorns resultat. Utvecklaren ansvarar inte för eventuella fel eller konsekvenser av informationen i kalkylatorn. Observera! Kalkylatorn tar inte hänsyn till alla möjliga skatte- eller avdragssituationer (t.ex. personliga avdrag, pensionsavgifter eller andra särskilda fall).",
        kuntaValinnat: ["Helsingfors", "Tammerfors", "Uleåborg", "Åbo", "Annat"]
      },
      en: {
        otsikko: "Net Salary Calculator",
        otsikkoAlateksti: "Calculate how much money you keep after taxes",
        palkka: "Monthly Salary (€)",
        ika: "Age",
        kunta: "City",
        kirkko: "I belong to the church",
        laske: "Calculate",
        kaateen: "Take-home (mo)",
        vero: "Tax (mo)",
        veroprosentti: "Estimated tax rate",
        vuosiyhteenveto: "Yearly Summary",
        vuositulo: "Annual Salary",
        vuosivero: "Annual Tax",
        vuosinetto: "Take-home per year",
        virhe: "Please enter salary and age correctly.",
        varoitus: "This net salary calculator is indicative. It does not replace official tax advice or calculators. Your final tax information may differ from the calculator results. The developer is not responsible for errors or consequences from the calculator. Note: The calculator does not consider all possible tax or deduction situations (e.g., personal deductions, pension contributions, or other special cases).",
        kuntaValinnat: ["Helsinki", "Tampere", "Oulu", "Turku", "Other"]
      }
    };

    function vaihdaKieli() {
      const lang = document.getElementById("language").value;
      const t = texts[lang];

      document.getElementById("otsikko").innerText = t.otsikko;
      document.getElementById("otsikkoAlateksti").innerText = t.otsikkoAlateksti;
      document.getElementById("labelPalkka").innerText = t.palkka;
      document.getElementById("labelIka").innerText = t.ika;
      document.getElementById("labelKunta").innerText = t.kunta;
      document.getElementById("labelKirkko").innerText = t.kirkko;
      document.getElementById("laskeNappi").innerText = t.laske;
      document.getElementById("varoitus").innerText = t.varoitus;

      // Päivitä kunta-valikon vaihtoehdot
      const kuntaSelect = document.getElementById("kunta");
      kuntaSelect.innerHTML = "";
      t.kuntaValinnat.forEach(k => {
        const option = document.createElement("option");
        option.value = k.includes("Muu") || k.includes("Other") ? "Muu" : k;
        option.text = k;
        kuntaSelect.appendChild(option);
      });

      if (document.getElementById("tulos").innerHTML.trim() !== "") {
        laske();
      }
    }

    function laske() {
      const palkka = parseFloat(document.getElementById("palkka").value);
      const ika = parseInt(document.getElementById("ika").value);
      const kunta = document.getElementById("kunta").value;
      const kirkollisvero = document.getElementById("kirkollisvero").checked;
      const tulosDiv = document.getElementById("tulos");
      const lang = document.getElementById("language").value;
      const t = texts[lang];

      if (isNaN(palkka) || palkka < 0 || isNaN(ika) || ika < 0) {
        alert(t.virhe);
        return;
      }

      const kunnallisverot = {
        "Helsinki": 0.175,
        "Tampere": 0.19,
        "Oulu": 0.205,
        "Turku": 0.20,
        "Muu": 0.21
      };
      let kunnallisvero = kunnallisverot[kunta] || 0.20;
      if (kirkollisvero) kunnallisvero += 0.015;

      let tyel = (ika >= 53 && ika <= 62) ? 0.0865 : 0.0715;
      const tyottomyysvakuutus = 0.015;
      const sairausvakuutus = 0.015;

      const veroSumma = palkka * (kunnallisvero + tyel + tyottomyysvakuutus + sairausvakuutus);
      const netto = palkka - veroSumma;
      const veroprosentti = (veroSumma / palkka) * 100;

      const vuosipalkka = palkka * 12;
      const vuosivero = veroSumma * 12;
      const vuosinetto = netto * 12;

      tulosDiv.innerHTML = `
        <div class="text-2xl font-bold">${t.kaateen}: ${netto.toFixed(2)} €</div>
        <div class="text-lg font-semibold mt-2">${t.vero}: ${veroSumma.toFixed(2)} €</div>
        <div class="text-lg font-semibold mt-1">${t.veroprosentti}: ${veroprosentti.toFixed(1)}%</div>

        <hr class="my-4 border-gray-300">

        <div class="text-lg font-bold mb-2 text-gray-900">${t.vuosiyhteenveto}</div>
        <div class="text-base font-semibold text-gray-900">${t.vuositulo}: ${vuosipalkka.toFixed(2)} €</div>
        <div class="text-base font-semibold text-gray-900">${t.vuosivero}: ${vuosivero.toFixed(2)} €</div>
        <div class="text-base font-semibold text-gray-900">${t.vuosinetto}: ${vuosinetto.toFixed(2)} €</div>
      `;

      tulosDiv.style.opacity = "1";
      tulosDiv.style.transform = "translateY(0)";
    }

    window.onload = () => {
      vaihdaKieli();
    };
  </script>

</body>
</html>
